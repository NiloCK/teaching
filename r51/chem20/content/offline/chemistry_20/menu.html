<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Menu</title>
<link rel="STYLESHEET" type="text/css" href="css/dhtmlXTree.css" />
<!-- The following javascript files MUST be loaded in this order -->
<script language="javascript" src="js/dhtmlXCommon.js" type="text/javascript"></script>
<script language="javascript" src="js/dhtmlXTree.js" type="text/javascript"></script>
<script language="javascript" src="js/dhtmlXTree_xw.js" type="text/javascript"></script>
<!-- Include this file to AUTOMATICALLY load the tree from an HTML list-->
<!--<script language="javascript" src="js/dhtmlXTree_start.js"></script>-->
<script language="javascript" type="text/javascript">
	function loadTree(){
		tree=new dhtmlXTreeObject(document.getElementById('treeBox'),"100%","100%",0);
		tree.setImagePath("images/img/");
		tree.enableCheckBoxes(false);
		tree.enableDragAndDrop(false);
		tree.enableTreeLines(false);
		tree.enableMultiLineItems('100px');
		tree.enableAutoSavingSelected(true,'os');
		tree.preventIECashing();
		tree.enableSmartXMLParsing(1);
		tree.setOnClickHandler(doOnClick);
		tree.setOnLoadingEnd(onLoadingEnd);
		tree.loadXML("tree.xml");
		
	}
	function unloadTree(){
		tree.saveOpenStates('os');
		tree.saveSelectedItem();
	}
	//
	function onLoadingEnd(){
		tree._xcloseAll=function(){ return true; };
		//if item was already opened
		//tree.restoreSelectedItem();
		tree.setOnLoadingEnd(onLoadingEnd2);
		tree.loadOpenStates("os");
	}
	function onLoadingEnd2(){
		//if item was opened after loadOpenStates
		//tree.restoreSelectedItem();
		tree.setOnLoadingEnd(function(){});
	}
	//
	function doOnClick(id){
			//do something
			var myLink = tree.getUserData(id,"myurl");
			if(myLink != undefined){
				window.open(myLink,"mainFrame");// or frames["someframe"].location.href = myUrl
				//tree.saveSelectedItem(myID);
			}
			
	}
	function MyReload() { 
		//Fix IE 6 Menu Loading Problem
		window.location.reload(); 
	} 
	
	function changeSelection(id){
			tree.selectItem(id);
	}

</script>
</head>
<body onload="loadTree()" onunload="unloadTree()" onload="MyReload()" >
<div id="treeBox"></div>
</body>
</html>
